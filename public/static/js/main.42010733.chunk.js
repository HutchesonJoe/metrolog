(this.webpackJsonpmetrolog=this.webpackJsonpmetrolog||[]).push([[0],{27:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(3),i=n.n(c),s=n(21),a=n.n(s),j=(n(27),n(10)),r=n(1);var o=function(){return Object(r.jsx)("div",{children:Object(r.jsx)(j.b,{to:"/",children:Object(r.jsx)("h1",{className:"App-header",children:"METROLog"})})})},l=n(2),u=n(4);var b=function(e){var t,n=e.errors;return t=n?n.map((function(e){return Object(r.jsx)("li",{children:e},e)})):"",Object(r.jsx)("div",{id:"errors",children:Object(r.jsx)("ul",{children:t})})};var d=function(e){var t=e.setUser,n=Object(c.useState)(""),i=Object(l.a)(n,2),s=i[0],a=i[1],j=Object(c.useState)(""),o=Object(l.a)(j,2),d=o[0],O=o[1],p=Object(c.useState)(!1),h=Object(l.a)(p,2),x=h[0],m=h[1],f=Object(c.useState)([]),v=Object(l.a)(f,2),g=v[0],C=v[1],S=Object(u.f)();return Object(r.jsx)("div",{id:"login",children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={username:s,password:d,isSuper:x};console.log(n),fetch("/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){e.ok?(e.json().then((function(e){return t(e)})),S("/home",{replace:!0})):e.json().then((function(e){C(e.errors),t(null)}))}))},children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"I am a current: "}),Object(r.jsxs)("select",{onChange:function(){return m(!x)},children:[Object(r.jsx)("option",{value:!1,children:"Tenant"}),Object(r.jsx)("option",{value:!0,children:"Superintendent"})]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Username: "}),Object(r.jsx)("input",{type:"text",onChange:function(e){return a(e.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Password: "}),Object(r.jsx)("input",{type:"password",onChange:function(e){return O(e.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Submit"})}),Object(r.jsx)("div",{children:Object(r.jsx)(b,{errors:g})})]})})},O=Object(c.createContext)();function p(e){var t=e.children,n=Object(c.useState)([]),i=Object(l.a)(n,2),s=i[0],a=i[1];return Object(c.useEffect)((function(){fetch("/buildings").then((function(e){return e.json()})).then((function(e){return a(e)}))}),[]),Object(r.jsx)(O.Provider,{value:s,children:t})}var h=function(){var e=Object(c.useState)(!0),t=Object(l.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(!1),a=Object(l.a)(s,2),j=a[0],o=a[1],u=Object(c.useState)(),d=Object(l.a)(u,2),p=d[0],h=d[1],x=Object(c.useState)(),m=Object(l.a)(x,2),f=m[0],v=m[1],g=Object(c.useState)(""),C=Object(l.a)(g,2),S=C[0],_=C[1],y=Object(c.useState)(""),w=Object(l.a)(y,2),E=w[0],T=w[1],k=Object(c.useState)(""),N=Object(l.a)(k,2),I=N[0],P=N[1],A=Object(c.useState)(""),L=Object(l.a)(A,2),B=L[0],D=L[1],F=Object(c.useState)(""),U=Object(l.a)(F,2),J=U[0],M=U[1],Y=Object(c.useState)(""),V=Object(l.a)(Y,2),R=V[0],X=V[1],z=Object(c.useState)(1),H=Object(l.a)(z,2),K=H[0],q=H[1],Q=Object(c.useState)(""),W=Object(l.a)(Q,2),G=W[0],Z=W[1],$=Object(c.useState)(""),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useState)(""),ie=Object(l.a)(ce,2),se=ie[0],ae=ie[1],je=Object(c.useContext)(O).map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.address},e.id)}));return Object(r.jsxs)("div",{id:"register",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"I am a new: "}),Object(r.jsxs)("select",{onChange:function(e){h([]),"tenant"===e.target.value?(o(!0),i(!0)):"super"===e.target.value?(o(!0),i(!1)):"select"===e.target.value&&o(!1)},children:[Object(r.jsx)("option",{value:"select",children:"Select:"}),Object(r.jsx)("option",{value:"tenant",children:"Tenant"}),Object(r.jsx)("option",{value:"super",children:"Superintendent"})]})]}),Object(r.jsx)("div",{children:j?Object(r.jsxs)("form",{onSubmit:function(e){var t,c;e.preventDefault(),n?(c={first_name:S,last_name:E,email:I,phone_number:B,additional_tenants:R,currently_occupying:!0,username:G,password:te,password_confirmation:se},t="/tenants"):(c={first_name:S,last_name:E,email:I,phone_number:B,username:G,password:te,password_confirmation:se},t="/supers"),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){e.ok&&(e.json().then((function(e){n&&v(e.id),o(!1)})),h(["Success! Log in above."]),n&&function(){var e={building_id:K,unit_number:J,tenant_id:f};fetch("/apartments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){e.ok&&e.json().then((function(){return h(["Success! Log in above."])})),e.ok||e.json().then((function(e){return h(e.errors)}))}))}()),e.ok||e.json().then((function(e){return h(e.errors)}))}))},children:[Object(r.jsx)("label",{children:"Select building:"}),Object(r.jsx)("select",{onChange:function(e){return q(e.target.value)},children:je}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:" First Name: "}),Object(r.jsx)("input",{type:"text",onChange:function(e){return _(e.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:" Last Name: "}),Object(r.jsx)("input",{type:"text",onChange:function(e){return T(e.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:" Email: "}),Object(r.jsx)("input",{type:"text",onChange:function(e){return P(e.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:" Phone: "}),Object(r.jsx)("input",{type:"text",onChange:function(e){return D(e.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:" User Name: "}),Object(r.jsx)("input",{type:"text",onChange:function(e){return Z(e.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:" Password: "}),Object(r.jsx)("input",{type:"password",onChange:function(e){return ne(e.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:" Password Confirmation: "}),Object(r.jsx)("input",{type:"password",onChange:function(e){return ae(e.target.value)}})]}),n?Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Unit Number:"}),Object(r.jsx)("input",{type:"text",onChange:function(e){return M(e.target.value)}})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Additional Tenant (full name; if multiple, separate with commas):"}),Object(r.jsx)("input",{type:"text",onChange:function(e){return X(e.target.value)}})]})]}):"",Object(r.jsx)("button",{type:"submit",children:"Submit"})]}):""}),Object(r.jsx)("div",{children:Object(r.jsx)(b,{errors:p})})]})},x=Object(c.createContext)();function m(e){var t=e.children,n=Object(c.useState)([]),i=Object(l.a)(n,2),s=i[0],a=i[1];return Object(c.useEffect)((function(){fetch("/complaints").then((function(e){return e.json()})).then((function(e){return a(e)}))}),[]),Object(r.jsx)(x.Provider,{value:s,children:t})}var f=Object(c.createContext)();function v(e){var t=e.children,n=Object(c.useState)([]),i=Object(l.a)(n,2),s=i[0],a=i[1];return Object(r.jsx)(f.Provider,{value:[s,a],children:t})}var g=Object(c.createContext)();function C(e){var t=e.children,n=Object(c.useState)(),i=Object(l.a)(n,2),s=i[0],a=i[1];return Object(r.jsx)(g.Provider,{value:[s,a],children:t})}var S=function(e){var t,n=e.complaintId,i=e.complaint,s=e.setComplaint,a=e.isSuper,j=Object(c.useState)(""),o=Object(l.a)(j,2),u=o[0],b=o[1],d=Object(c.useState)(i.complaint_type),O=Object(l.a)(d,2),p=O[0],h=O[1],m=Object(c.useState)(i.complaint_id),f=Object(l.a)(m,2),v=f[0],g=f[1],C=Object(c.useContext)(x);Object(c.useEffect)((function(){b(a?i.super_notes:i.tenant_notes)}),[]),t=a?{super_notes:u}:{complaint_type:p,complaint_id:v,tenant_notes:u};var S=C.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.complaint_type},e.id)}));return Object(r.jsx)("div",{children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/tenant_complaints/".concat(n),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){s(e)}))},children:[a?"":Object(r.jsx)("div",{id:"select-type",children:Object(r.jsxs)("select",{onChange:function(e){if(0!==e.target.value){g(e.target.value);var t=C.find((function(t){return t.id===parseInt(e.target.value)}));h(t.complaint_type)}},children:[Object(r.jsx)("option",{value:0,children:"Select Type"}),S]})}),Object(r.jsx)("input",{placeholder:"Enter notes",onChange:function(e){return b(e.target.value)},value:u}),Object(r.jsx)("button",{type:"submit",children:"Submit"})]})})};var _=function(e){var t,n=e.tenantComplaint,i=new Date(n.created_at),s=new Date(n.updated_at),a=new Date,j=Math.floor(Math.abs(a-i)/864e5),o=Object(c.useState)(!1),u=Object(l.a)(o,2),d=u[0],p=u[1],h=Object(c.useState)(n),m=Object(l.a)(h,2),v=m[0],C=m[1],_=Object(c.useState)([]),y=Object(l.a)(_,2),w=y[0],E=y[1],T=Object(c.useState)(!1),k=Object(l.a)(T,2),N=k[0],I=k[1],P=Object(c.useState)(),A=Object(l.a)(P,2),L=A[0],B=A[1],D=Object(c.useContext)(x),F=Object(c.useContext)(f),U=Object(l.a)(F,2),J=U[0],M=U[1],Y=Object(c.useContext)(O),V=Object(c.useContext)(g),R=Object(l.a)(V,1)[0];if(Object(c.useEffect)((function(){C(n),R&&R.buildings&&I(!0)}),[R]),Object(c.useEffect)((function(){B(n.resolved)}),[]),Y&&(t=Y.find((function(e){return e.id===n.building_id}))),v&&D.find((function(e){return e.id===n.complaint_id})),void 0!==n)return Object(r.jsxs)("div",{id:"complaint-card",children:[Object(r.jsx)("h3",{children:v.complaint_type}),t?Object(r.jsx)("h4",{children:t.address}):"",Object(r.jsxs)("div",{children:["Unit #: ",v.unit]}),Object(r.jsxs)("div",{children:["Tenant notes: ",v.tenant_notes]}),Object(r.jsxs)("div",{children:["Super notes: ",v.super_notes]}),Object(r.jsxs)("div",{children:["Opened: ",i.toString()]}),Object(r.jsxs)("div",{children:["Updated: ",s.toString()]}),Object(r.jsx)("div",{id:L?"":"open",children:L?"Closed":"Open"}),L?"":Object(r.jsxs)("div",{children:["This complaint has been open for ",j," days."]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{onClick:function(){E([]),R?p(!d):E(["You must be logged in to edit/update/delete complaints."])},children:d?"Close":"Edit Complaint/Add Note"}),Object(r.jsx)("button",{onClick:function(){R?N?E(["Only a tenant can delete a complaint."]):window.confirm("Are you sure you want to delete this complaint? You CANNOT undo this action. 'OK' to confirm, or CANCEL.")&&fetch("/tenant_complaints/".concat(n.id),{method:"DELETE"}).then((function(e){if(e.ok){var t=J.filter((function(e){return e.id!==parseInt(v.id)}));M(t)}else e.json().then((function(e){return E(e.errors)}))})):E(["You must be logged in to edit/update/delete complaints."])},children:"Delete Complaint"})]}),Object(r.jsx)("div",{id:"edit-window",children:d?Object(r.jsx)(S,{complaintId:n.id,complaint:v,setComplaint:C,setComplaints:M,isSuper:N,setIsSuper:I}):""}),Object(r.jsx)("div",{children:Object(r.jsx)(b,{errors:w})})]})},y=n(16),w=function(){var e=Object(c.useContext)(O);console.log(e);var t=Object(c.useState)({}),n=Object(l.a)(t,2),i=n[0],s=n[1],a=Object(c.useState)([]),j=Object(l.a)(a,2),o=j[0],u=j[1];Object(c.useEffect)((function(){if(e){var t=[];e.map((function(e){var n={lng:e.longitude,lat:e.latitude},c=e.address,i=e.number_of_units,s=e.tenant_complaints.length;t.push({name:c,location:n,unitCount:i,complaintCount:s})})),u(t)}}),[e]);return Object(r.jsx)(y.c,{googleMapsApiKey:"AIzaSyCm4gB5LX1PXFyaXst7ryFqQjgBJk_a1HU",children:Object(r.jsxs)(y.a,{mapContainerStyle:{height:"100vh",width:"100%"},zoom:13,center:{lat:40.7812,lng:-73.9665},children:[o.map((function(e){return console.log(e),Object(r.jsx)(y.d,{position:e.location,onClick:function(){s(e)}},e.id)})),i.location&&Object(r.jsx)(y.b,{position:i.location,clickable:!0,onCloseClick:function(){return s({})},children:Object(r.jsx)("div",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("h3",{children:i.name}),Object(r.jsxs)("li",{children:[i.unitCount," units in buildling"]}),Object(r.jsxs)("li",{children:[i.complaintCount," complaints filed"]})]})})})]})})};var E=function(){var e=Object(c.useContext)(O),t=Object(c.useState)([]),n=Object(l.a)(t,2),i=n[0],s=n[1],a=Object(c.useState)([]),j=Object(l.a)(a,2),o=j[0],u=j[1],b=Object(c.useState)(!1),d=Object(l.a)(b,2),p=d[0],h=d[1];Object(c.useEffect)((function(){fetch("./complaints").then((function(e){return e.json()})).then((function(e){return u(e)}))}),[]);var x=e.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.address},e.id)}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsxs)("select",{onChange:function(t){if(0===parseInt(t.target.value))h(!1);else{var n=e.find((function(e){return e.id===parseInt(t.target.value)}));s(n.tenant_complaints),0===n.tenant_complaints.length?h(!0):h(!1)}},children:[Object(r.jsx)("option",{value:0,children:"Select Building to View All Complaints"}),x]})}),Object(r.jsx)("div",{children:Object(r.jsx)(w,{})}),Object(r.jsx)("div",{id:"building-complaints-window",children:i.map((function(e){return Object(r.jsx)(_,{tenantComplaint:e,complaintTypes:o},e.id)}))}),Object(r.jsx)("div",{children:p?"No complaints in this Building.":""})]})};var T=function(){var e=Object(c.useContext)(g),t=Object(l.a)(e,1)[0];return t.first_name,t.last_name,t.email,t.phone_number,t.building,t.apartment,t.additional_tenants,Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Tenant Information:"}),Object(r.jsxs)("p",{children:[t.first_name," ",t.last_name]}),Object(r.jsxs)("p",{children:[t.email,", ",t.phone_number]}),Object(r.jsxs)("p",{children:["Additional tenants: ",t.additional_tenants]})]})};var k=function(){var e,t=Object(c.useContext)(g),n=Object(l.a)(t,1)[0];return console.log(n),n.buildings&&(e=n.buildings.map((function(e){var t;return t=1!==e.tenant_complaints.length,Object(r.jsxs)("li",{children:[e.address,", ",e.tenant_complaints.length," ",t?"complaints":"complaint"]},e.id)}))),Object(r.jsxs)("div",{children:[Object(r.jsx)("h4",{children:"Super Information:"}),Object(r.jsxs)("p",{children:[n.first_name," ",n.last_name]}),Object(r.jsxs)("p",{children:[n.email,", ",n.phone_number]}),Object(r.jsx)("p",{children:"Your buildings:"}),Object(r.jsx)("ul",{children:e})]})};var N=function(){var e=Object(c.useContext)(g);return Object(l.a)(e,1)[0],Object(r.jsx)("div",{children:Object(r.jsxs)("div",{id:"navbar",children:[Object(r.jsx)(j.b,{to:"/buildingcomplaints",children:"View All Complaints in Building"}),Object(r.jsx)(j.b,{to:"/mycomplaints",children:"View Complaints for Your Unit"}),Object(r.jsx)(j.b,{to:"/filecomplaints",children:"File New Complaint"})]})})};var I=function(){var e,t=Object(c.useState)(),n=Object(l.a)(t,2),i=n[0],s=n[1],a=Object(c.useContext)(g),j=Object(l.a)(a,1)[0].buildings;j&&(e=j.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.address},e.id)})));var o="";return i&&0!==i.tenant_complaints.length?o=i.tenant_complaints.map((function(e){return Object(r.jsx)(_,{tenantComplaint:e},e.id)})):i&&0===i.tenant_complaints.length&&(o="No complaints in this building."),Object(r.jsxs)("div",{children:[Object(r.jsxs)("select",{onChange:function(e){var t=j.find((function(t){return t.id===parseInt(e.target.value)}));s(t)},children:[Object(r.jsx)("option",{children:"Select Building"}),e]}),Object(r.jsx)("div",{children:o})]})};var P=function(){var e,t=Object(c.useContext)(g),n=Object(l.a)(t,1)[0],i=Object(c.useContext)(f),s=Object(l.a)(i,2),a=s[0],j=s[1],o=Object(c.useContext)(x),u=Object(c.useState)(),b=Object(l.a)(u,2),d=b[0],O=b[1],p=Object(c.useState)(!1),h=Object(l.a)(p,2),m=h[0],v=h[1],C=Object(c.useState)([]),S=Object(l.a)(C,2),y=S[0],w=S[1],E=Object(c.useState)([]),T=Object(l.a)(E,2),k=T[0],N=T[1];if(Object(c.useEffect)((function(){N(a)}),[a]),Object(c.useEffect)((function(){n&&n.buildings&&w(n.buildings)}),[n]),Object(c.useEffect)((function(){if(!0===m){var e=a.filter((function(e){return!1===e.resolved}));console.log(e),N(e)}else N(a)}),[m]),Object(c.useEffect)((function(){if(y!==[]){var e=y.map((function(e){return e.tenant_complaints}));j(e.flat())}}),[y]),a){var I=k;d&&(I=k.filter((function(e){return e.complaint_id===parseInt(d)}))),e=I.map((function(e){return Object(r.jsx)(_,{tenantComplaint:e},e.id)}))}var P=o.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.complaint_type},e.id)}));return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Filter by Complaint Type: "}),Object(r.jsxs)("select",{onChange:function(e){O(parseInt(e.target.value))},name:"type",children:[Object(r.jsx)("option",{children:"Select"}),P]})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Show open complaints only"}),Object(r.jsx)("input",{type:"checkbox",name:"open/close",onChange:function(){return v(!m)}})]}),e]})};var A=function(){var e,t=Object(c.useContext)(f),n=Object(l.a)(t,2),i=n[0],s=(n[1],Object(c.useState)("/by-date")),a=Object(l.a)(s,2);return a[0],a[1],console.log(i),i&&(e=i.map((function(e){return Object(r.jsx)(_,{tenantComplaint:e},e.id)}))),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsxs)("select",{onChange:function(e){console.log(e.target.value)},children:[Object(r.jsx)("option",{value:"/by-date",children:"All Complaints"}),Object(r.jsx)("option",{value:"/open-complaints",children:"Open Complaints"}),Object(r.jsx)("option",{value:"/closed-complaints",children:"Closed Complaints"})]})}),e]})};var L=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2);return t[0],t[1],Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{id:"navbar",children:[Object(r.jsx)(j.b,{to:"/allcomplaints",className:"navlink",children:"View All Complaints"}),Object(r.jsx)(j.b,{to:"/super/complaintsbybuilding",className:"navlink",children:"By Building"})]}),Object(r.jsx)(u.c,{})]})};var B=function(){var e,t=Object(c.useContext)(g),n=(Object(l.a)(t,1)[0],Object(c.useContext)(f)),i=Object(l.a)(n,2),s=i[0],a=i[1];return console.log(s),s&&(e=s.map((function(e){return Object(r.jsx)(_,{tenantComplaint:e,complaints:s,setComplaints:a},e.id)}))),Object(r.jsx)("div",{children:e})};var D=function(e){var t,n=e.complaints,i=e.setComplaints,s=Object(c.useState)([]),a=Object(l.a)(s,2),j=a[0],o=a[1],u=Object(c.useContext)(g),b=Object(l.a)(u,1)[0];return console.log(b),Object(c.useEffect)((function(){if(b&&b.apartment){var e=n.filter((function(e){return e.tenant_id===b.id}));o(e)}}),[b]),b&&b.apartment&&(console.log(n),t=j.map((function(e){return Object(r.jsx)(_,{tenantComplaint:e,setComplaints:i,complaints:n},e.id)}))),Object(r.jsx)("div",{children:t})},F=n(13),U=n(22);var J=function(e){var t=e.complaints,n=e.setComplaints,i=Object(c.useContext)(g),s=Object(l.a)(i,1)[0],a=Object(c.useContext)(x),j=Object(c.useState)(),o=Object(l.a)(j,2),u=o[0],d=o[1],O=Object(c.useState)(),p=Object(l.a)(O,2),h=p[0],m=p[1],f=Object(c.useState)(""),v=Object(l.a)(f,2),C=v[0],S=v[1],_=Object(c.useState)(!0),y=Object(l.a)(_,2),w=y[0],E=y[1],T=Object(c.useState)([]),k=Object(l.a)(T,2),N=k[0],I=k[1];console.log(t,n),Object(c.useEffect)((function(){0!==a.length&&(d(a[0].complaint_type),m(a[0].id))}),[a]);var P=a.map((function(e){return Object(r.jsx)("option",{value:[e.complaint_type,e.id],children:e.complaint_type},e.id)}));return Object(r.jsxs)("div",{id:"complaint-form",children:[w?Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),E(!w);var c=Object(U.a)({resolved:!1,tenant_notes:C,complaint_id:u.id,tenant_id:s.id,building_id:s.building.id,unit:s.apartment.unit_number,complaint_type:u},"complaint_id",h);fetch("/tenant_complaints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(e){e.ok&&e.json().then((function(e){console.log(e),n([].concat(Object(F.a)(t),[e])),I(["Your complaint has been logged."])})),e.ok||e.json().then((function(e){return I(e.errors)}))}))},children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Select Complaint Type:"}),Object(r.jsx)("select",{onChange:function(e){var t=e.target.value.split(",");d(t[0]),m(t[1])},children:P})]}),Object(r.jsx)("div",{children:Object(r.jsx)("textarea",{onChange:function(e){return S(e.target.value)}})}),Object(r.jsx)("button",{type:"submit",children:"Submit"})]}):"",Object(r.jsx)(b,{errors:N})]})};var M=function e(){var t=Object(c.useContext)(g),n=Object(l.a)(t,2),i=n[0],s=n[1],a=Object(c.useContext)(f),o=Object(l.a)(a,2),b=o[0],O=o[1],p=Object(c.useState)(),x=Object(l.a)(p,2),m=x[0],v=x[1],C=Object(u.f)();return Object(c.useEffect)((function(){fetch("/me").then((function(e){e.ok&&e.json().then((function(e){s(e)}))}))}),[]),Object(c.useEffect)((function(){i&&i.apartment?v(!1):i&&i.buildings&&v(!0)}),[i]),Object(c.useEffect)((function(){if(i&&i.buildings){var e=i.buildings.map((function(e){return e.tenant_complaints})).flat();O(e)}else i&&i.apartment&&O(i.building.tenant_complaints)}),[i]),Object(c.useEffect)((function(){i&&i.buildings?v(!0):v(!1)}),[i]),Object(r.jsxs)("div",{id:"home",children:[i?Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:["Welcome, ",i.first_name,Object(r.jsx)("button",{onClick:function(){fetch("/logout",{method:"DELETE"}).then((function(e){e.ok&&(s(null),C("/",{replace:!0}))}))},children:"Logout"})]}),m?Object(r.jsx)(k,{}):Object(r.jsx)(T,{}),i.apartment?Object(r.jsx)(N,{}):Object(r.jsx)(L,{})]}):Object(r.jsxs)("div",{id:"login-window",children:[Object(r.jsxs)("div",{children:["Existing Tenant/Superintendent? ",Object(r.jsx)(j.b,{to:"/login",children:" Login "})]}),Object(r.jsxs)("div",{children:["New to METROlog? ",Object(r.jsx)(j.b,{to:"/register",children:"Register"})]}),Object(r.jsxs)("div",{children:["Prospective tenants?",Object(r.jsx)(j.b,{to:"/complaintsbybuilding",children:"Veiw Complaints in All Buildings"})]})]}),Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{exact:!0,path:"/login",element:Object(r.jsx)(d,{setUser:s})}),Object(r.jsx)(u.a,{exact:!0,path:"/register",element:Object(r.jsx)(h,{})}),Object(r.jsx)(u.a,{exact:!0,path:"/complaintsbybuilding",element:Object(r.jsx)(E,{})}),Object(r.jsx)(u.a,{exact:!0,path:"/homepage/home",element:Object(r.jsx)(e,{})}),Object(r.jsx)(u.a,{path:"/allcomplaints",element:Object(r.jsx)(P,{complaints:b,setComplaints:O})}),Object(r.jsx)(u.a,{path:"/super/complaintsbybuilding",element:Object(r.jsx)(I,{})}),Object(r.jsx)(u.a,{path:"/complaintsbydate",element:Object(r.jsx)(A,{})}),Object(r.jsx)(u.a,{exact:!0,path:"/buildingcomplaints",element:Object(r.jsx)(B,{complaints:b,setComplaints:O})}),Object(r.jsx)(u.a,{exact:!0,path:"/mycomplaints",element:Object(r.jsx)(D,{complaints:b,setComplaints:O})}),Object(r.jsx)(u.a,{exact:!0,path:"/filecomplaints",element:Object(r.jsx)(J,{complaints:b,setComplaints:O})})]})]})};var Y=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(o,{}),Object(r.jsx)("div",{children:Object(r.jsx)(v,{children:Object(r.jsx)(C,{children:Object(r.jsx)(p,{children:Object(r.jsx)(m,{children:Object(r.jsx)(M,{})})})})})})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),s(e),a(e)}))};a.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(j.a,{children:Object(r.jsx)(Y,{})})}),document.getElementById("root")),V()}},[[37,1,2]]]);
//# sourceMappingURL=main.42010733.chunk.js.map